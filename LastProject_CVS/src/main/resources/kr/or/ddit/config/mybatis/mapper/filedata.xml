<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="filedata">

	<!-- 파일데이터 등록 -->
	<insert id="insertFiledata" parameterType="filedataVo">
		INSERT INTO FILEDATA 
		(
			  FILE_ID
			, FILE_NAME
			, FILE_UPNAME
			, FILE_PATH
			, FILE_SIZE
			, FILE_DOT
			, BD_ID
			, MEM_ID
		)
		VALUES 
		(
			  #{file_id}
			, #{file_name}
			, #{file_upname}
			, #{file_path}
			, #{file_size}
			, #{file_dot}
			, 'NOTICE0000000001'
			, #{mem_id}
		)
	</insert>
	
	<!-- 파일데이터 목록 조회 -->
	<select id="getFrofilePicList" parameterType="String" resultType="filedataVo">
		SELECT FILE_ID
			 , FILE_NAME
			 , FILE_UPNAME
			 , FILE_PATH
			 , FILE_SIZE
			 , FILE_DOT
			 , BD_ID
			 , MEM_ID
		FROM FILEDATA 
	   WHERE 1=1
	     AND MEM_ID = #{mem_id}
	</select>
	
	<!-- 파일데이터 삭제 -->
	<delete id="deleteFiledata" parameterType="filedataVo">
		DELETE FROM FILEDATA
		WHERE 1=1
		<choose>
			<when test="file_id != null and file_id != ''">
			AND  FILE_ID = #{file_id}
			</when>
			<when test="mem_id != null and mem_id != ''">
			AND  MEM_ID = #{mem_id}
			</when>
			<otherwise>
			AND 1=2
			</otherwise>
		</choose>
	</delete>
	
  	
</mapper>