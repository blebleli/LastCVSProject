<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardJoin">
	<!-- 관리자 - 게시판 페이징 기법 -->
	<select id="adBoardViewList" parameterType="map" resultType="boardJoinVo">
	
	select * from (
		SELECT ROWNUM CNT, T.*
				FROM  (
				        SELECT    (SELECT PROD_NAME FROM PROD WHERE BOARD.PROD_ID = PROD.PROD_ID) AS PROD_NAME
								, (SELECT MEM_NAME FROM MEMBER WHERE BOARD.MEM_ID = MEMBER.MEM_ID) AS MEM_NAME
								, BD_TITLE
								, BD_RATING
								, BD_DATE
								, MEM_ID
								, BD_KIND_ID
								, PROD_ID
								, BD_ID
						FROM BOARD
		              	WHERE BD_KIND_ID=#{BD_KIND_ID}
						ORDER BY BD_DATE DESC       
		      ) T )  WHERE CNT BETWEEN (#{page}-1)*#{pageSize}+1 AND #{page}*#{pageSize}
	</select>
	<!-- 
		select * from (
		SELECT ROWNUM CNT, T.*
				FROM  (
				        SELECT    (SELECT PROD_NAME FROM PROD WHERE BOARD.PROD_ID = PROD.PROD_ID) AS PROD_NAME
								, (SELECT MEM_NAME FROM MEMBER WHERE BOARD.MEM_ID = MEMBER.MEM_ID) AS MEM_NAME
								, BD_TITLE
								, BD_RATING
								, BD_DATE
								, MEM_ID
								, BD_KIND_ID
								, PROD_ID
								, BD_ID
						FROM BOARD
		              	WHERE BD_KIND_ID=#{BD_KIND_ID}
						ORDER BY BD_DATE DESC       
		      ) T )  WHERE CNT BETWEEN (#{page}-1)*#{pageSize}+1 AND #{page}*#{pageSize} -->
	
	<!-- 전체 건수 -->
  	<select id="getBoardTotCnt" resultType="int">
    	SELECT COUNT(*) FROM BOARD
  	</select>
</mapper>