<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="search">

	<!-- 사용자ID 중복 조회 -->
	<select id="getSearchProdList" parameterType="String" resultType="prodVo">
		SELECT *
		FROM PROD
		WHERE PROD_NAME LIKE '%'||#{searchWord}||'%'
	</select>
	
	<!-- 상품조회페이지내에서 검색 -->
	<select id="searchProd" parameterType="Map" resultType="prodVo">
	SELECT * 
		FROM
			(SELECT a.*,ROWNUM rn 
				FROM
				(SELECT prod.*
					FROM prod
					ORDER BY prod_name)a
          WHERE prod_price BETWEEN #{min_price} AND #{max_price}
          AND prod_name LIKE '%'||#{searchfor}||'%'
          )
		WHERE rn BETWEEN (#{page}-1)*#{pageSize}+1 AND #{page}*#{pageSize}
	
	</select>
	
</mapper>	